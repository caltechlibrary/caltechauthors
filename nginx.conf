user www-data;
worker_processes auto;
pid /run/nginx.pid;
error_log /var/log/nginx/error.log;
include /etc/nginx/modules-enabled/*.conf;

events {
	worker_connections 1024;
	# multi_accept on;
}

http {

	##
	# Basic Settings
	##

	sendfile on;
	tcp_nopush on;
	tcp_nodelay     on;
	types_hash_max_size 2048;
	# server_tokens off;

	keepalive_timeout  65;

	# server_names_hash_bucket_size 64;
	# server_name_in_redirect off;

	include /etc/nginx/mime.types;
	default_type application/octet-stream;
	types {
        # The default MIME types file doesn't assign "application/javascript"
        # to "*.mjs" files (ECMAScript modules)
        application/javascript js mjs;
    	}

	##
	# SSL Settings
	##

	ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE
	ssl_prefer_server_ciphers on;

	##
	# Logging Settings
	##

	access_log /var/log/nginx/access.log;

	##
	# Gzip Settings
	##

	gzip on;

	gzip_disable "msie6";
    	gzip_http_version 1.1;
    	gzip_comp_level 5; # or anything between 4-6
    	gzip_min_length 100;
    	gzip_proxied any;
    	# We may need more mime-types here (eg. 'application/x-bibtex')
    	gzip_types
        	application/atom+xml
        	application/javascript
        	application/json
        	application/ld+json
        	application/manifest+json
        	application/octet-stream
        	application/rss+xml
       		application/vnd.geo+json
        	application/vnd.ms-fontobject
        	application/x-font-ttf
        	application/x-javascript
        	application/x-web-app-manifest+json
        	application/xhtml+xml
        	application/xml
        	application/xml+rss
        	font/opentype
        	image/bmp
        	image/svg+xml
        	image/x-icon
        	text/cache-manifest
        	text/css
        	text/javascript
        	text/plain
        	text/vcard
        	text/vnd.rim.location.xloc
        	text/vtt
        	text/x-component
        	text/x-cross-domain-policy
        	text/xml;
    	gzip_vary on;

	##
	# Virtual Host Configs
	##

	include /etc/nginx/conf.d/*.conf;
	include /etc/nginx/sites-enabled/*;
}


